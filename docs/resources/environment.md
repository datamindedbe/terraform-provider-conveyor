---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "conveyor_environment Resource - conveyor"
subcategory: ""
description: |-
  Provides a Conveyor environment.
---

# conveyor_environment (Resource)

Provides a Conveyor environment.

## Example Usage

```terraform
resource "conveyor_environment" "dev" {
  name = "dev"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the environment.

### Optional

- `airflow_configuration` (Block List, Max: 1) Allows you to configure Airflow. (see [below for nested schema](#nestedblock--airflow_configuration))
- `airflow_version` (String) The Airflow version of the environment, currently only Airflow 2 is supported. Defaults to `2`.
- `cluster_id` (String) The cluster id of the environment.
- `datahub_integration` (Block List, Max: 1) Allows you to configure the Airflow DataHub integration. (see [below for nested schema](#nestedblock--datahub_integration))
- `deletion_protection` (Boolean) Whether to protect your environment from deletion. Defaults to `false`.
- `iam_identity` (String) The IAM identity attached to the airflow processes. This is required when configuring secrets in the airflow_configuration.
- `instance_lifecycle` (String) The instance lifecycle for the environment, either spot or on-demand. Defaults to `spot`.

### Read-Only

- `id` (String) The id of the environment.

<a id="nestedblock--airflow_configuration"></a>
### Nested Schema for `airflow_configuration`

Optional:

- `core` (Block List, Max: 1) Allows you to configure the core Airflow settings. (see [below for nested schema](#nestedblock--airflow_configuration--core))
- `secret` (Block List, Max: 1) Allows you to configure the Airflow secrets backend. (see [below for nested schema](#nestedblock--airflow_configuration--secret))
- `webserver` (Block List, Max: 1) Allows you to configure the core webserver settings. (see [below for nested schema](#nestedblock--airflow_configuration--webserver))

<a id="nestedblock--airflow_configuration--core"></a>
### Nested Schema for `airflow_configuration.core`

Optional:

- `max_active_task_per_dag` (Number) Sets the parallelism configuration in Airflow. Defaults to `32`.
- `parallelism` (Number) Sets the parallelism configuration in Airflow. Defaults to `128`.


<a id="nestedblock--airflow_configuration--secret"></a>
### Nested Schema for `airflow_configuration.secret`

Required:

- `enabled` (Boolean) Enables the Airflow secrets backend integration.

Optional:

- `connection` (Block List, Max: 1) Allows you to configure the Airflow connections using a secret. (see [below for nested schema](#nestedblock--airflow_configuration--secret--connection))
- `variable` (Block List, Max: 1) Allows you to configure the Airflow variables using a secret. (see [below for nested schema](#nestedblock--airflow_configuration--secret--variable))

<a id="nestedblock--airflow_configuration--secret--connection"></a>
### Nested Schema for `airflow_configuration.secret.connection`

Required:

- `name` (String) The name of the secret containing the connection information.

Optional:

- `keyvault` (String) The name of the Azure keyvault in which the secret is stored.


<a id="nestedblock--airflow_configuration--secret--variable"></a>
### Nested Schema for `airflow_configuration.secret.variable`

Required:

- `name` (String) The name of the secret containing the Airflow variables.

Optional:

- `keyvault` (String) The name of the Azure keyvault in which the secret is stored.



<a id="nestedblock--airflow_configuration--webserver"></a>
### Nested Schema for `airflow_configuration.webserver`

Optional:

- `navbar_color` (String) Sets the color of the navbar in Airflow. Defaults to `#fff`.



<a id="nestedblock--datahub_integration"></a>
### Nested Schema for `datahub_integration`

Required:

- `enabled` (Boolean) Enables the Airflow DataHub integration.

Optional:

- `capture_ownership_info` (Boolean) Configures capture ownership info for the Airflow DataHub integration. Defaults to `true`.
- `capture_tags_info` (Boolean) Configures capture tags info for the Airflow DataHub integration. Defaults to `true`.
- `cluster` (String) Sets the cluster used by the Airflow DataHub integration. Defaults to `prod`.
- `conn_id` (String) Sets the connection used by the Airflow DataHub integration. Defaults to `datahub_rest_default`.
- `graceful_exceptions` (Boolean) When graceful exceptions is set for the Airflow DataHub integration, exceptions will not result in failures in Airflow. Defaults to `true`.

## Import

Import is supported using the following syntax:

```shell
export ENV_ID=$(conveyor env get --name dev -ojson | jq -r ".id")
terraform import conveyor_environment.dev "$ENV_ID"
```
